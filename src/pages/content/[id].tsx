import ContentLayout from "@/Layout/ContentLayout";
import MarkDownContent from "@/components/MarkDownContent";
import Head from "next/head";



export default function Page ({ content } : { content: string}) 
{
    return <>
        <Head>
            <title>The Palestinian Side</title>
            <meta name="description" content="Generated by create next app" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <link rel="icon" href="/favicon.ico" />
        </Head>
        <main>
            <ContentLayout p={2}>
                <MarkDownContent>
                    {content}
                </MarkDownContent>
            </ContentLayout>
        </main>
    </>
}

import { CONTENT_DIR } from "@/lib/constant";
import { readFileSync, readdirSync } from "fs";
import { GetStaticPropsContext } from "next";

export async function getStaticPaths () 
{
    const tableOfContent = readdirSync(CONTENT_DIR);
    const paths = tableOfContent.map(p => ({ params: { id: p } }))
    
    return { paths, fallback: true }
}

export async function getStaticProps(context: GetStaticPropsContext)
{
    const { id } = context.params as { id: string}
    const fileContent = readFileSync(`${CONTENT_DIR}/${id}.md`, "utf-8")
    
    return {
        props: {
            content: fileContent
        },
        revalidate: 5
    }
}

